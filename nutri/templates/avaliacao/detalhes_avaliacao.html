{% extends 'base.html' %}
{% load static %}

{% block title %}Avaliação — Detalhes{% endblock %}

{% block page_title %}Avaliação de {{ avaliacao.consulta_avaliacao.paciente.nome }}{% endblock %}
{% block page_subtitle %}Detalhes das Dobras Cutâneas e Circunferências do paciente.{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto space-y-6">

    <!-- Cabeçalho com botão voltar -->
    <div class="flex justify-between items-center mb-4">
        <h1 class="text-2xl font-bold text-emerald-800 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422M12 14v7M12 14L5.84 10.578"/>
            </svg>
            Detalhes da Avaliação
        </h1>
        <p class="text-xs text-slate-600">Criada em {{avaliacao.criado_em }}</p>

        <!-- Botão Voltar -->
        <a href="{% url 'detalhes_consulta' avaliacao.consulta_avaliacao.id %}" 
           class="inline-flex items-center gap-2 bg-slate-200 hover:bg-slate-300 text-black px-4 py-2 rounded-xl shadow transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
            Voltar para Consulta
        </a>
    </div>

    {% if avaliacao %}
        <!-- Card Dobras Cutâneas -->
        <div class="bg-white shadow-lg rounded-xl p-5 border-l-4 border-emerald-600 hover:shadow-xl transition-all">
            <h3 class="text-lg font-semibold text-emerald-700 mb-3">Dobras Cutâneas (mm)</h3>
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                <p><span class="font-medium">Peito:</span> {{ avaliacao.peito }}</p>
                <p><span class="font-medium">Abdomen:</span> {{ avaliacao.abdomen }}</p>
                <p><span class="font-medium">Iliaca:</span> {{ avaliacao.iliaca }}</p>
                <p><span class="font-medium">Axilar Média:</span> {{ avaliacao.axilar_media }}</p>
                <p><span class="font-medium">Coxas:</span> {{ avaliacao.coxas }}</p>
                <p><span class="font-medium">Tríceps:</span> {{ avaliacao.triceps }}</p>
                <p><span class="font-medium">Escápula:</span> {{ avaliacao.escapula }}</p>
            </div>
        </div>

        <!-- Card Circunferências -->
        <div class="bg-white shadow-lg rounded-xl p-5 border-l-4 border-blue-600 hover:shadow-xl transition-all">
            <h3 class="text-lg font-semibold text-blue-700 mb-3">Circunferências (cm)</h3>
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                <p><span class="font-medium">Peitoral:</span> {{ avaliacao.circunf_peitoral }}</p>
                <p><span class="font-medium">Cintura:</span> {{ avaliacao.circunf_cintura }}</p>
                <p><span class="font-medium">Abdomen:</span> {{ avaliacao.circunf_abdomen }}</p>
                <p><span class="font-medium">Bíceps Direito:</span> {{ avaliacao.circunf_biceps_dir }}</p>
                <p><span class="font-medium">Bíceps Esquerdo:</span> {{ avaliacao.circunf_biceps_esq }}</p>
                <p><span class="font-medium">Antebraço Direito:</span> {{ avaliacao.circunf_antebraco_dir }}</p>
                <p><span class="font-medium">Antebraço Esquerdo:</span> {{ avaliacao.circunf_antebraco_esq }}</p>
                <p><span class="font-medium">Quadril:</span> {{ avaliacao.circunf_quadril }}</p>
                <p><span class="font-medium">Coxa Direita:</span> {{ avaliacao.circunf_coxa_dir }}</p>
                <p><span class="font-medium">Coxa Esquerda:</span> {{ avaliacao.circunf_coxa_esq }}</p>
                <p><span class="font-medium">Panturrilha Direita:</span> {{ avaliacao.circunf_pant_dir }}</p>
                <p><span class="font-medium">Panturrilha Esquerda:</span> {{ avaliacao.circunf_pant_esq }}</p>
            </div>
        </div>
        <!-- Observações destacadas -->
    <div class="bg-white shadow-lg rounded-xl p-5 border border-slate-200 hover:shadow-xl transition-all">
        <h3 class="text-lg font-semibold text-slate-700 mb-3">Observações</h3>
        <p class="text-slate-600">{{ avaliacao.observacao_avaliacao }}</p>
    </div>

        <div class="mt-4 flex gap-2">
            <a href="{% url 'editar_avaliacao' avaliacao.id %}" 
            class="inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2 rounded-xl shadow transition-all">
                <!-- Ícone de lápis (editar) -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 20h9M16.5 3.5l4 4-10 10H6v-4L16.5 3.5z" />
                </svg>
                Editar Avaliação
            </a>
            <a href="{% url 'excluir_avaliacao' avaliacao.id %}" 
            class="inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-5 py-2 rounded-xl shadow transition-all">
                <!-- Ícone de lixeira (excluir) -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7L5 7M6 7l1 12h10L18 7M10 11v6M14 11v6M9 7V4h6v3" />
                </svg>
                Excluir Avaliação
            </a>
            <a href="{% url 'exportar_avaliacao' avaliacao.id %}" 
            class="inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-xl shadow transition-all">
                <!-- Ícone de download/exportar -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M12 12v8m0 0l-4-4m4 4l4-4M12 4v8" />
                </svg>
                Exportar Avaliação
            </a>

        </div>

    {% else %}
        <p class="text-slate-500 mt-2">Nenhuma avaliação cadastrada para este paciente.</p>
    {% endif %}

</div>
{% endblock %}
