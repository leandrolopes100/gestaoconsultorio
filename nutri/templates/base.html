{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Sistema — Gestão Consultório{% endblock %}</title>

  <!-- Tailwind via CDN para protótipo. Em produção, troque por build local. -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Ajuste fino de paleta para remeter a consultório de nutrição
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            leaf: {
              50: '#f5fbf7',
              100: '#e9f7ee',
              200: '#cfeedd',
              300: '#a7ddbf',
              400: '#7fcda2',
              500: '#55bc83',
              600: '#3ea56e',
              700: '#2f8357',
              800: '#246746',
              900: '#1d5239',
            },
            clay: '#f5f2eb',   // tom neutro claro
            mint: '#e8fff4',   // destaque suave
          }
        }
      }
    }
  </script>

  {% block extra_css %}{% endblock %}
</head>
<body class="min-h-screen bg-clay text-slate-800">
  <!-- Container geral -->
  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside id="sidebar" class="w-72 shrink-0 bg-white/90 backdrop-blur border-r border-slate-200 hidden md:flex md:flex-col">
      <!-- Branding -->
      <div class="flex items-center gap-3 p-5 border-b border-slate-100">
        <!-- Ícone folha/garfo -->
        <div class="p-2 rounded-2xl bg-leaf-100">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-7 h-7 text-leaf-700">
            <!-- Heroicon: sprout -->
            <path fill-rule="evenodd" d="M12 2.25a.75.75 0 01.75.75v1.5a6.75 6.75 0 016.75 6.75.75.75 0 01-1.5 0A5.25 5.25 0 0012.75 5.3v6.95a6.75 6.75 0 016.75 6.75.75.75 0 01-1.5 0 5.25 5.25 0 00-5.25-5.25H12A6.75 6.75 0 015.25 6.75a.75.75 0 011.5 0A5.25 5.25 0 0012 12.25V3a.75.75 0 01.75-.75H12z" clip-rule="evenodd" />
          </svg>
        </div>
        <div>
          <h1 class="text-lg font-semibold tracking-tight">Gestão Consultório</h1>
          <p class="text-xs text-slate-500">Sammantha Klippel</p>
        </div>
      </div>

      <!-- Navegação -->
      <nav class="flex-1 p-3">
        <ul class="space-y-1">
          <!-- Pacientes -->
          <li>
            <a href="{% url 'pacientes' %}"
               class="group flex items-center gap-3 rounded-xl px-3 py-2.5 transition hover:bg-leaf-50 hover:text-leaf-800 {% if section == 'pacientes' %}bg-mint text-leaf-900 ring-1 ring-leaf-200{% endif %}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="w-5 h-5">
                <!-- Heroicon Outline: Users -->
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 19.127a9 9 0 10-6 0M12 12a3 3 0 100-6 3 3 0 000 6z"/>
              </svg>
              <span class="font-medium">Pacientes</span>
            </a>
          </li>

          <!-- Consultas -->
          <li>
            <a href="{% url 'consultas' %}"
               class="group flex items-center gap-3 rounded-xl px-3 py-2.5 transition hover:bg-leaf-50 hover:text-leaf-800 {% if section == 'consultas' %}bg-mint text-leaf-900 ring-1 ring-leaf-200{% endif %}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="w-5 h-5">
                <!-- Heroicon Outline: Calendar Days -->
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6.75 3v2.25m10.5-2.25V5.25M3.75 8.25h16.5m-15 3h3m-3 3h3m6-3h3m-3 3h3M4.5 6h15A1.5 1.5 0 0121 7.5v11.25A1.5 1.5 0 0119.5 20.25h-15A1.5 1.5 0 013 18.75V7.5A1.5 1.5 0 014.5 6z"/>
              </svg>
              <span class="font-medium">Consultas</span>
            </a>
          </li>

          <!-- Financeiro -->
          <li>
            <a href="#"
               class="group flex items-center gap-3 rounded-xl px-3 py-2.5 transition hover:bg-leaf-50 hover:text-leaf-800 {% if section == 'financeiro' %}bg-mint text-leaf-900 ring-1 ring-leaf-200{% endif %}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="w-5 h-5">
                <!-- Heroicon Outline: Banknotes / Chart Bar combo minimal -->
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 7.5h16.5v9.75A1.5 1.5 0 0118.75 18.75H5.25A1.5 1.5 0 013.75 17.25V7.5zM7.5 10.5h.008v.008H7.5V10.5zm3 0h6m-6 3h4.5"/>
              </svg>
              <span class="font-medium">Financeiro</span>
            </a>
          </li>
        </ul>
      </nav>

      <!-- Rodapé da sidebar -->
      <div class="mt-auto p-4 border-t border-slate-100 text-xs text-slate-500">
        <p>&copy; {{ now|date:'Y' }} Nutri Clínica</p>
      </div>
    </aside>

    <!-- Conteúdo principal -->
    <div class="flex-1 flex flex-col min-w-0">
      <!-- Topbar -->
      <header class="sticky top-0 z-20 bg-white/80 backdrop-blur border-b border-slate-200">
        <div class="flex items-center gap-3 px-4 py-3">
          <!-- Botão mobile para abrir/fechar sidebar -->
          <button type="button" class="md:hidden inline-flex items-center justify-center rounded-xl border border-slate-200 p-2" onclick="document.getElementById('sidebar').classList.toggle('hidden')" aria-label="Alternar menu">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="w-6 h-6">
              <!-- Heroicon Outline: Bars3 -->
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
          </button>

          <div class="flex-1 min-w-0">
            <h2 class="truncate font-semibold text-slate-800">{% block page_title %}Dashboard{% endblock %}</h2>
            <p class="text-xs text-slate-500">{% block page_subtitle %}{% endblock %}</p>
          </div>

          <!-- Ações do usuário / busca -->
          <div class="flex items-center gap-2">
            <form action="#" method="get" class="hidden sm:flex items-center">
              <label for="q" class="sr-only">Buscar</label>
              <input id="q" name="q" type="text" placeholder="Buscar..." class="w-48 rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-leaf-300 bg-white" />
            </form>
            <a href="#" class="inline-flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-2 text-sm hover:bg-slate-50">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="w-5 h-5">
                <!-- Heroicon Outline: User -->
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.75 7.5a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 19.5a7.5 7.5 0 1115 0v.75H4.5V19.5z" />
              </svg>
              <span class="hidden sm:inline">Perfil</span>
            </a>
          </div>
        </div>
      </header>

      <!-- Conteúdo -->
      <main class="flex-1 p-4 md:p-6">
        {% block messages %}
          {% if messages %}
            <div class="space-y-2 mb-4">
              {% for message in messages %}
                <div class="rounded-xl px-4 py-3 text-sm {% if message.tags == 'error' %}bg-red-50 text-red-800 border border-red-200{% elif message.tags == 'success' %}bg-green-50 text-green-800 border border-green-200{% else %}bg-slate-50 text-slate-700 border border-slate-200{% endif %}">
                  {{ message }}
                </div>
              {% endfor %}
            </div>
          {% endif %}
        {% endblock %}

        <div class="rounded-2xl bg-white shadow-sm border border-slate-200">
          <div class="p-4 md:p-6">
            {% block content %}
            <!-- Seu conteúdo vai aqui -->
            {% endblock %}
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="p-4 text-xs text-slate-500">
        <p>Desenvolvedor Leandro Lopes. <span class="text-leaf-700">Sistemas de Gestão</span></p>
      </footer>
    </div>
  </div>

  {% block extra_js %}{% endblock %}
</body>
</html>
